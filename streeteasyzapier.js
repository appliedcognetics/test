fetch = require("node-fetch");

async function zap () {
var inputData = { date :'1/1/1970',cc:`cc@gmail.com`, body:`[http://streeteasy.com/] SALES [http://streeteasy.com/] RENTALS [http://streeteasy.com/rentals]  
StreetEasy Listing Inquiry 
From 
Sue and Griff Hays [mailto:hays.sue@gmail.com] 
StreetEasy Listing street address: 
412 West 110 #2, Manhattan, NY 10025 
We’re interested in 412 West 110 #2. Is it possible to see the apartment this weekend? 
----- 
Sue and Griff Hays [mailto:hays.sue@gmail.com] 
sent you this message about your rental listing
on StreetEasy.
StreetEasy URL:
https://streeteasy.com/Rental/2669044
[https://streeteasy.com/Rental/2669044] 
[https://play.google.com/store/apps/details?id=com.zillow.android.streeteasy&referrer=utm_fiksu_adid%3D985561] [https://handler.fiksu.com/click?adid=a979b910-472f-0132-595c-22000b100896&adnet=XVT7PFS3&appid=660363289&b=10l3Ik&device_class=ios&s=00001] ©StreetEasy | 130 Fifth Avenue, 9th Floor, New York, NY 10011 
Unsubscribe [https://streeteasy.com/nyc/user/email_preferences?email_token=BAhJIiFyZW50YWxzQHN0b25lY3Jlc3RyZWFsdHkuY29tBjoGRVQ%3D--605939dde43e3b82cd9470d3937a547540315f79] Privacy Policy [http://www.zillow.com/corp/Privacy.htm]<html lang="en">
<head>
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" name="viewport"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style media="screen" type="text/css">
* { font-family: Arial, sans-serif; margin:0; padding:0; }
p { font-size: 15px; margin: 15px 0; }
a { color: #0080C6; }
</style>
<style media="only screen and (max-width: 600px)" type="text/css">
@media only screen and (max-width: 600px) {
*, p { font-size: 15px; }
center { min-width: 0 !important; }
center > table { width: 100% !important }
img[class="logo"] { height: 19px!important; width: 115px!important; }
img[class="top_space"] { width: 10px!important; }
td[class="menu_links"] { line-height: 1.1!important; }
td[class="no_height"] { height: 0!important; }
td[class="width20"] { width: 20px!important; }
td[class="width_20"] { width: 20px!important; }
td[class="height_20"] { height: 20px!important; }
tr[class="hide_m"],
div[class="hide_m"] { display: none!important }
div[class="show_m"], div.show_m,
span[class="show_m"] { display: block!important;
float: none!important;
max-height: inherit!important;
overflow:visible !important;
width: auto!important; }
.appleLinks a {
color: #c8c6c6; 
text-decoration: none;
} 
}
</style>
<style media="only screen and (max-width: 600px)" type="text/css">
@media only screen and (max-width: 600px) {
div[class="wrap_border"] {
padding: 0 20px;
}
td[class="listing_info"]{
line-height: 1.35;
}
table[class="width_100"],
td[class="width_100"] {
display: block !important;
width: 100% !important;
}
img[class="width_100"] {
height: 250px !important;
width: 100% !important;
}
div[class="pad_top"] {
padding-top: 20px;
}
.height_30 {
height: 30!important;
}
}
</style>
<style media="only screen" type="text/css">
@media only screen {
.appleLinkMail, .appleLinkMail a {
color: #1A1F2C;
font-size: 11px;
text-decoration: none;
}
.appleLinksText, .appleLinksText a {
color: #1A1F2C;
font-size: 10px;
text-decoration: none;
}
}
</style>
<style media="only screen" type="text/css">
@media only screen and (max-width: 321px) {
/*fix for iphone 5 spacing*/
td[class="width_40"] {
width: 15px !important;
}
}
@media only screen and (max-width: 600px) {
a[class="font_size_26"] {
font-size: 26px !important;
}
table[class="width_full"],
img[class="width_full"] {
width: 100% !important;
}
div[class="inline"] {
display: inline !important;
}
table[class="show"] {
display: block !important;
font-size: inherit !important;
float: none !important;
height: auto !important;
line-height: inherit !important;
max-height: inherit !important;
overflow: visible !important;
width: auto !important;
}
td[class="hide"] {
display: none !important;
}
td[class="width_0"] {
width: 0 !important;
}
td[class="width_20"] {
width: 20px !important;
}
td[class="width_40"] {
width: 40px;
}
td[class="height_5"] {
height: 5px !important;
}
td[class="height_25"] {
height: 25px !important;
}
td[class="height_45"] {
height: 45px !important;
}
a[class="show-button"] {
border-top: 16px solid #0195E5 !important;
display: inline-block !important;
font-weight: bold !important;
font-size: 14px !important;
float: none !important;
height: 30px !important;
line-height: 14px !important;
max-height: inherit !important;
overflow: visible !important;
text-decoration: none !important;
width: auto !important;
}
div[class="listing_block_bottom"] {
background: #F2F2F2;
background: linear-gradient(to bottom, #dbdbdb 0%, #f2f2f2 100%);
height: 8px;
}
.appleLinkFrom a {
color: #1A1F2C;
font-size: 14px;
text-decoration: none;
}
ul {
margin:0;
padding: 20 0 0 15 !important;
} 
ul li {
padding:0;
margin:10px 0;
text-decoration: none;
font-size: 14px;
}
}
</style>
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" name="viewport"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style media="screen" type="text/css">
* { font-family: Arial, sans-serif; margin:0; padding:0; }
p { font-size: 15px; margin: 15px 0; }
a { color: #0195E5; }
</style>
<style media="only screen and (max-width: 600px)" type="text/css">
@media only screen and (max-width: 600px) {
*, p { font-size: 15px; }
center { min-width: 0 !important; }
center > table { width: 100% !important }
img[class="logo"] { height: 19px!important; width: 115px!important; }
img[class="top_space"] { width: 10px!important; }
td[class="menu_links"] { line-height: 1.1!important; }
td[class="no_height"] { height: 0!important; }
td[class="width20"] { width: 20!important; }
td[class="width_20"] { width: 20!important; }
td[class="height_20"] { height: 20px!important; }
tr[class="hide_m"],
div[class="hide_m"] { display: none!important }
div[class="show_m"], div.show_m,
span[class="show_m"] { display: block!important;
float: none!important;
max-height: inherit!important;
overflow:visible !important;
width: auto!important; }
.appleLinks a {
color: #c8c6c6; 
text-decoration: none;
} 
}
</style>
<style media="only screen and (max-width: 600px)" type="text/css">
@media only screen and (max-width: 600px) {
td[class="hide"] { display: none !important; }
}
</style>
</head><body bgcolor="#F5F5F5" text="#1a1f2c"><span style="width:0;opacity:0;max-height:0;mso-hide:all;overflow:hidden;float:left;display:none !important;">Sue and Griff Hays inquired about your listing.</span>
<table bgcolor="#F5F5F5" border="0" cellpadding="0" cellspacing="0" style="font-family: Helvetica,sans-serif; font-size: 13px; -webkit-font-smoothing:antialiased; -webkit-text-size-adjust:none; width: 100%!important; height: 100%;" width="100%">
<tr>
<td></td>
<td align="center" bgcolor="#F5F5F5" style="max-width:600px;" valign="top">
<center style="min-width:600px;" width="100%">
<table align="center" bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" style="border-top:5px solid #032765;" width="600">
<tr>
<td class="hide" colspan="4">
<img height="1" src="https://d1pgqke3goo8l6.cloudfront.net/rilfmSUMTZW4ZLv331dz_spacer.gif" style="min-width: 600px;" width="600"/>
</td>
</tr>
<tr>
<td colspan="4" height="18" style="font-size:1px;"> </td>
</tr>
<tr>
<td class="width20" width="40"></td>
<td align="left" valign="bottom">
<a data-click-track-id="9347" href="https://send.streeteasy.com/wf/click?upn=2Qze6E-2BF4hx9FfY9AwjHUqd6Rjt4ArtX8vp2W-2Fjsb3-2BBqiJAut1Dx3FnkL9nmNuuZNYz8VReqcirF5pM4oiMMwS8DTwlwqSqZv0lxDJf89mjfqgNBl9ZoYg7PXWTb-2Fh0TlEx452kE74DU-2BeeoS-2Fm1qUdwQe4ioRbFe6WwFkvtRE-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6t9gHfyZMb-2By7gH5dnPacmMx2AV0HZECBp5MnGdFs2TEwNw5V6BZ5Tyjthrh600eQC5eWuF-2BBjeN3kxJQyt75DfGUFWDWMMM2VwNoDeWh8Dn4115WGtVGqQ0tN4L6kaWM7Pp-2BdO2QZfIsgeviIIFjXq4qk5kB6c6DCfSQhxRMoxyJpQmdN40y9rC8TyG4ev6Lh6YcOIW9dl48N8Hiemx9GB" style="color:#0195E5; display:inline-block">
<img alt="StreetEasy" border="0" height="26" src="https://d1pgqke3goo8l6.cloudfront.net/BAj6AaxfTdiVz6JJ6qb3_2018_StreetEasy_Logo_2x.png" width="122"/>
</a>
</td>
<td align="right" class="menu_links" style="font-family:Helvetica,sans-serif;font-size:16px;font-weight:100;line-height: 1.2;" valign="middle">
<a data-swu-id="7459" href="https://send.streeteasy.com/wf/click?upn=2Qze6E-2BF4hx9FfY9AwjHUqd6Rjt4ArtX8vp2W-2Fjsb3-2FXxAdxlIK-2FiR75LUdm8x0SCm35Xa9K8LZUh2SrQs-2FjG3QOyEbTRUEZNp4yeEpiO3G3xmyQSyIgeDy-2Bk-2BvpVV6ACg4oPwxj3x9h00gtpgltlrxUzkrM996Sk2j-2FaZw6rcE-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6t-2BrjCbrLw2DZGdQxwDSTJvpeQdI4nuWKh-2Bg-2FYqw3faEDh43Q0xq5XsYWkNMhke9Ea5LtZnA2bB4EAW38fnK-2FarY5Az-2B2we08CCEzU-2FJ7c-2FTijCBwWmjnJPEx2EUZp3MjXn9nw0kORYZNJeuXIwNJbZTcPAA4neC3w8YxrRRzJc-2BM0C-2B3be6OLsIQxM4JrnUdwha1dPqWdjgq3ahE7oYH7m" style="font-family:Helvetica,sans-serif; font-size:16px; color:#62646A; line-height:1.2; text-decoration:none; font-weight:100" target="_blank">Sales</a>
<img border="0" class="top_space" height="1" src="https://d1pgqke3goo8l6.cloudfront.net/rilfmSUMTZW4ZLv331dz_spacer.gif" width="55"/>
<a data-swu-id="5115" href="https://send.streeteasy.com/wf/click?upn=2Qze6E-2BF4hx9FfY9AwjHUmjCfngOQiPknJPeu-2FAg8WXlJTBIeUT-2BHSD5KFLGSviiEuvi28Cdooy-2BHy90ou7RW1nlR6vQDoLWZX1BhL4bixOSFYkrh6wOf3cLOXdoUGxVVLk45BpeOi69ElLNz6zxin4x9Jc7OblMpNfNfdsoMLQ-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6sbcdqVgClFfgKGaDSHR-2FSdm-2BMBnvHTgc-2FiZfM7XqNTjYnc65EcgtkVcGuRJxrEfN-2BDySt39wWUYNByyqfS3Hbwo-2B-2F11hl-2B4aLGFeDARF911DDtpTtq09BgqoM5nIi-2BfKD33jVibifV-2BOOOvc-2BqMa8L5SVdZIfmmi8RA28YpJQ1kcehWH5Qh-2FOpOu7ZZWJHjOJ-2BD-2Fi2RxFYvWrwZbXuy8i8" style="font-family:Helvetica,sans-serif; font-size:16px; color:#62646A; line-height:1.2; text-decoration:none; font-weight:100" target="_blank">Rentals</a>
</td>
<td class="width20" width="40"></td>
</tr>
<tr>
<td colspan="4" height="55" style="font-size:1px;"> </td>
</tr>
</table>
<table align="center" bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" style="font-family:Helvetica,sans-serif;" width="600">
<tr>
<td class="width_0" width="40"></td>
<td style="font-size: 14px;">
<table align="center" bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" style="font-family:Helvetica-Light,Helvetica,sans-serif;" width="100%">
<tr>
<td>
<div class="wrap_border">
<div class="inline" style="font-size:26px; line-height: 38px;font-family:Helvetica-Light,Helvetica,sans-serif;color: #1a1f2c;">
You have a new inquiry for
</div>
<div class="inline" style="font-size:26px; line-height:38px;">
<style>a[x-apple-data-detectors] {
text-decoration: none !important;
font-size: inherit !important;
}</style>
<a class="font_size_26" data-click-track-id="1155" href="https://send.streeteasy.com/wf/click?upn=BWyVXrMc5T-2F-2FO0oS6jVE-2FB4HV3WeOSfvOseiQs0uqaRp1uZ1ik5D4U6yQtL9tPQ1lOZiaqGKU0hPXhX4ErXrGkG5d7twsHEgJShgsbN9VIGIAFdcqp8X6yK1YqwGlvvogF9tRfPAVDCdakd8C02ZR3s8XK0SvjRLj1HhV-2BMdjonnQLjzWP-2FLLmo0kvZ53cS4_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6sMmdpFf3gsnL1AzjlG6joWDMATltjVgCVzPPxYLaF6eeKcs7oDz-2FPm3A2dKTgq3ESMiUygh6Efa-2BZ1DqTKAJ1ZvFLjvVCr8CsItjdCLNbwNcV3TmsFhvdDUnoIIsIl80zdy6q-2FHKIYrPtGwN6-2Ff4Wp5C5oDrM3NvlhFK5KhfAthiQre05C4cKzdWgpwpw6bNCOf1DWH2B4kDDtxHnpOneW" style="text-decoration:none; font-family:Helvetica-Light,Helvetica,sans-serif; color:#0195E5">
412 West 110 #2
</a>
</div>
</div>
</td>
</tr>
<tr height="40">
<td></td>
</tr>
</table>
<table bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" class="width_full" style="font-family:Helvetica,sans-serif; border-top: 1px solid #f1f1f1; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd;border-left: 1px solid #eee; box-shadow: 1px 2px 6px rgba(0,0,0,0.2)" width="520">
<tr>
<td colspan="3">
<table align="center" bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" style="font-family: Helvetica,sans-serif" width="100%">
<tr>
<td class="height_45" colspan="3" height="55"></td>
</tr>
<tr>
<td class="width_20" width="50"></td>
<td class="appleLinkFrom" style="line-height:22px; font-size:14px;color: #1a1f2c;">
From: Sue and Griff Hays
<br/>
Email: <a class="appleLinkFrom" data-click-track-id="4578" href="mailto:hays.sue@gmail.com?Subject=Re: Your Listing Inquiry" style="font-size:14px; text-decoration:none; color:#0195E5" target="_blank">hays.sue@gmail.com</a>
<br/>
Phone: <a class="appleLinkFrom" href="tel:(513) 560-2354" style="font-size:14px; text-decoration:none; color:#0195E5" target="_blank">(513) 560-2354</a>
<br/>
<br/>
We’re interested in 412 West 110 #2. Is it possible to see the apartment this weekend?
<br/>
<br/>
<span style="color:#ffffff; background: #0195E5;">
<a data-click-track-id="8771" href="mailto:hays.sue@gmail.com?subject=Your Inquiry About 412 West 110 #2" style="background:#0195E5; border-top:13px solid #0195E5; border-bottom:13px solid #0195E5; color:#ffffff; display:inline-block; font-size:14px; font-weight:bold; letter-spacing:0.5; text-decoration:none">
        REPLY NOW        
</a>
</span>
</td>
<td class="width_20" width="50"></td>
</tr>
<tr>
<td colspan="3" height="45"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="3">
<img class="width_full" height="250" src="https://cdn-img2.streeteasy.com/nyc/image/42/356536642.jpg" style="display:block" width="520"/>
</td>
</tr>
<tr>
<td class="height_5" colspan="3" height="35"></td>
</tr>
<tr>
<td class="width_0" width="50"></td>
<td>
<table bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" style="font-family:Helvetica,sans-serif; color: #1a1f2c;" width="100%">
<tr>
<td>
<div class="wrap_border" style="font-size: 14px;">
<div class="pad_top">
<a class="font20" href="https://send.streeteasy.com/wf/click?upn=BWyVXrMc5T-2F-2FO0oS6jVE-2FB4HV3WeOSfvOseiQs0uqaRp1uZ1ik5D4U6yQtL9tPQ1rzx-2BvHjCLjhPji8YoW37lkoOFjSXfBEH4tzFXgGc06ZAXFaRJBX0buk8-2BZ0a-2Fd7CUpjxc2DmmG5qM3n3f1RsxzsFBqtpZhsyF0lCEi1l-2Fds-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6tSy50cZIOkghehUA3ytn0KaaiP3LPqnMUZhX08lnFJA7v5bHT0vJToiKzdbH7Elnh8TYdzCNszHJNZ8H3h3p6CcYUahVNOqcsdZ7PeAKrP05CFnQiFOjswgIacjl5a52J5bqrydnKQgFc3N7-2F64Ngccjbpwm6L2U01KUs4qtKC7qDWqLY9HMK-2FgtR2-2B5ej512jC2aBtJRCetl8PxiPXcGi" style="color:#0195E5; font-size:20px; font-weight:100; text-decoration:none">
412 West 110 #2
</a>
</div>
<div style="font-size: 8px"> </div>
<div class="font20" style="font-size: 16px;line-height: 1.5;">
$5,950 sdfsdf
<span style="color: #A1A1A1;font-size: 10px;font-weight:bold;">
FOR RENT
</span>
</div>
<div style="font-size: 6px"> </div>
<div class="font16">
3 beds<span style="color: #A1A1A1;">  •  </span>2 baths
</div>
<div style="font-size: 8px"> </div>
<div class="font16">
Rental
in Manhattan Valley
</div>
<div style="font-size: 10px;"> </div>
<span class="appleLinkMail" style="background: #fbc346; border-top: 4px solid #fbc346;border-bottom: 3px solid #fbc346; border-radius: 2px; color: #1a1f2c; display: inline-block; font-size: 11px; font-weight: bold;">
   OPEN HOUSE: 
FRI 12:30-1:30PM
  
</span>
<div style="font-size: 10px;"> </div>
</div>
</td>
</tr>
</table>
</td>
<td class="width_0" width="50"></td>
</tr>
<tr>
<td class="height_25" colspan="3" height="35"></td>
</tr>
</table>
<div class="listing_block_bottom">
<br/>
<br/>
<br/>
</div>
</td>
<td class="width_0" width="20"></td>
</tr>
</table>
<center>
<style media="only screen and (max-width: 600px)" type="text/css">
@media only screen and (max-width: 600px) {
td[class="width_57"] { width: 57px !important }
td[class="width_4"] { width: 4px !important }
td[class="width_20"] { width: 20px !important }
td[class="height_0"] { height: 0 !important }
.hide_m { display: none !important; }
.block_m { display: block!important; }
}
</style>
<table align="center" bgcolor="#F5F5F5" border="0" cellpadding="0" cellspacing="0" width="600">
<tbody>
<tr>
<td colspan="4" height="35"></td>
</tr>
<tr>
<td class="width_57" width="86"></td>
<td align="left">
<img alt="phone" height="75" src="https://d1pgqke3goo8l6.cloudfront.net/1XlepMTGjlPuYJz017gH_2018_phone_screenshot_2x_360.png" width="58"/>
</td>
<td class="width_4" width="7"></td>
<td>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td class="height_0" height="16" style="font-size: 1px;"> </td>
</tr>
<tr>
<td align="left" style="font-family: Helvetica; color: #1a1f2c; font-size: 14px; line-height: 16px; line-height: 20px;">
<span class="hide_m" style="font-family: Helvetica; color: #1a1f2c; font-size: 14px; line-height: 20px;">Search</span>
<span style="padding-right: 2px; font-family: Helvetica; color: #1a1f2c; font-size: 14px; line-height: 20px;">Sales and Rentals on the Go</span>
<a class="block_m" data-click-track-id="1379" href="https://send.streeteasy.com/wf/click?upn=2Qze6E-2BF4hx9FfY9AwjHUp4xE2UFOgNt13QKXa-2B-2BCBNOm9ENtcUxju79pFugds3Ob1-2FE138O5MC1Cuz2VSFKqZ7cE8ZZ6wPLafCPRzNa2TCz7tB4KA3eGnye-2FBRX6lLz9Jm2l-2Bfn-2BgZVh6sR95pp2T2t2addz4MFbMkj34Z-2Bz2M-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6t5ArHE8j8nYh32-2B-2FPIGjtVMmzXKwIpEo7gklPA6VC4ad13MlFPSy54ghiA0JNsS3oPKea44O-2FzxYaERbDcrjvwZKuahBvkP4EDFlkF1i4mLZdIQqfwM8u25vcMAPNdA-2FXlQ83YRM-2B8Ugglkx7EhosctP3fe-2F9Nr58n5SZKITB3S0pJ0gc9b4vIiYAgRJu2nPj5XCi9GNkSTEYLLGcyNodr" style="font-family:Helvetica; font-size:13px; font-weight:bold; text-decoration:none; color:#0195E5">Download the App</a>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td colspan="4">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td class="width_20" width="40"></td>
<td>
<table border="0" cellpadding="0" cellspacing="0" style="border-top: 1px solid #cccccc;" width="100%">
<tbody>
<tr>
<td>
</td>
</tr>
</tbody>
</table>
</td>
<td class="width_20" width="40"></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<table align="center" bgcolor="#F5F5F5" border="0" cellpadding="0" cellspacing="0" width="600">
<tbody>
<tr>
<td height="49"></td>
</tr>
<tr>
<td align="center">
<table align="center" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td>
<a data-click-track-id="6773" href="https://send.streeteasy.com/wf/click?upn=2Qze6E-2BF4hx9FfY9AwjHUpDuu5BurjGy-2Bposqz0SXbxTauPMxQBgEC6SqPaPmX6PBGkOL-2FcsLh6bh0I4ZUO5JXhIu3FTEwPem3a0x8YHSuGXOIW3TUnNRI3b10v2DHtb3-2Binwg5gfHd-2F4VUMV1GJIijxGViuOMerloJkSFzIitw-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6v25cmRaKQKdHpklIJxlop-2BQBL0q-2FYXzO3NrRnbzSMvohq8p6j0GEIVDd-2FLkQZjk-2B0lMprwcxWFQpWDrPNh-2Bxhx-2Bnhw6yfeND3MJrr4FyYCwE4wHzGmz4k0jllF1ChN27NBY2oEnWvr9J5l1FymOkTST9uovggS5xe4eYi4dd2j19QoTfvV8JeDDxyBhBXyAKkd2WlJzk9HLq-2Fnh1Xmd0LW" style="color:#0195E5">
<img alt="blog@2x.png" border="0" class="social-link" height="24" src="https://d1pgqke3goo8l6.cloudfront.net/47rU84KRXukyvKWpxIiq_2018_blog_2x.png" width="24"/>
</a>
</td>
<td width="24"></td>
<td>
<a data-click-track-id="8897" href="https://send.streeteasy.com/wf/click?upn=BWyVXrMc5T-2F-2FO0oS6jVE-2FPE4xttqaIW7A6ZF3pyL-2BzqhFMvznr-2FnmJXSv7be-2Bza2k-2FrQhOzAbayGlJq9hgQTzfBWFIYwxCn7nXfK-2BlbWL34-2BkKVJbFnRqGGGCi48nFa4pJHZDLDOH1-2BgPyAeHDvuG8r0ByLJSeiuVt-2Fg1rLP8CM-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6teg4ugfl-2FwrgbY7OW33YRYm-2FodYrLHcKPJlZkPSD0K3KS14f7uCuYd63M04gKr-2FwyFYW9yZH-2FidLF9fVrxiQEHQUQlojl-2F91yO6kA6D4EnmQx8tghuvQDZI0ErrHQK36-2BPZjDZTZe-2BjsqNRBu3gTZSvwlDUhMOIVjugwfVCpzeK6XZNZ12jAc2xH71PncEargl3IPsisxHeQEpYxILuoCS" style="color:#0195E5">
<img alt="twitter@2x.png" border="0" class="social-link" height="24" src="https://d1pgqke3goo8l6.cloudfront.net/6j7zfgWnTAWah4q9s2vu_2018_twitter_2x.png" width="24"/>
</a>
</td>
<td width="24"></td>
<td>
<a data-click-track-id="4956" href="https://send.streeteasy.com/wf/click?upn=BWyVXrMc5T-2F-2FO0oS6jVE-2FOa3ZbqoBubw96HCmkywXdW0HKLuEhdnl8qA7EJ7vlQMjhEi-2FktWdzhlcmOsOCsQTh9Rw-2FbkWmM81QGkAT3nIyReKRKZmV2G4v4ptqLajDFU0h-2Bqp-2F2yTHwvIuU3i25KqxthJf-2FTCeui2tcrKBkplh2KeVJKYJ5UVlSdpcZDxVaW_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6t02AXxigqPskXeenNFz4SSYIs-2BoT-2BvD-2FvES9MQFr8QZcBl-2FZjYwFXozId50U9Ny3myw0Pgc6NErdkeu6IxWhFhfS7uKCDFMKWqREHei-2Ff8aYLevb5vyGnZnoDs1VN2Tb1Tk0rXRVE6KIEdaD8v2qgtwjhc5VSObtTwKMhGdORkYkxkVkoN-2Bua5n91Vy1fBMGaouab5-2Fx6lUfjUMvQQHtbt" style="color:#0195E5">
<img alt="facebook@2x.png" border="0" class="social-link" height="24" src="https://d1pgqke3goo8l6.cloudfront.net/eUlOYGYGToey9R7iV3Pw_2018_facebook_2x.png" width="24"/>
</a>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td height="22"></td>
</tr>
<tr>
<td align="center" class="appleLinkMail" style="color:#1A1F2C;font-family:Helvetica,sans-serif;font-size:10px;">
<a data-click-track-id="8258" href="#" style="font-family:Helvetica,sans-serif; font-size:10px; color:#1A1F2C; text-decoration:none">
<span class="block_m" style="font-family:Helvetica,sans-serif; font-size: 10px; color: #1A1F2C; text-decoration: none; line-height: 14px;">© StreetEasy</span>
<span class="hide_m"> · </span>
<span style="font-family:Helvetica,sans-serif; font-size: 10px; color: #1A1F2C; text-decoration: none; line-height: 18px;">130 Fifth Avenue  ·  New York, NY 10011</span>
</a>
</td>
</tr>
<tr>
<td height="9"></td>
</tr>
<tr>
<td align="center">
<a href="https://send.streeteasy.com/wf/click?upn=BWyVXrMc5T-2F-2FO0oS6jVE-2FKY6a5MuviK-2BxyTzVfJVtqEm5GuGRosyGaXMhKkkxcKrzhF2yu2tUzzxB1snxq1qhcRQ7Hg4u3H59JG2McYR-2F5sq9znLHk3JdSdqyXJqKq5xHGowl2EuZIqSxa2bw4nEFseegZV6q9oi4FcY4WyleuIOZ15GhW6TBMVhr1569VNPS27Py4y2J5UTEhgus4oRxYbANiK-2FiSLZWNj5SC3uU-2Bbk3wRgpqOwB3tOJpS7rUnltmJmuigfzcKBo7mn6nv33UOooET42nod81P6Gy0CpGPyI1S0JxqPBdo4qTsyczVhyz7cTvTgXQlpkz-2BVX2Eh0A-3D-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6uV7u8uvCKs4hsHX9uolnF987bAG8LLKBCvaUhUjbmnsAltXGyHcO9PQUCXF-2FDvPVjzZ0-2BMCEqgu1hbtjCueqspjNZzJCzq0gfhEi-2ByDj59QnGod4UfLgbU8Nu3C7uADLdrkLLIHzaK6e6mcl50q-2Bohg-2F5s-2BuYLDC4F6IqNyAza-2FJ-2B12TcvPuleLHP70LGDIeWtVzY7tePxoigiz2ydGxtE" style="color:#A1A1A1; font-family:Helvetica-Light,sans-serif; font-size:9px; font-weight:bold; letter-spacing:0.2px; text-decoration:none" target="_blank">UNSUBSCRIBE</a>
<img border="0" height="1" src="https://d1pgqke3goo8l6.cloudfront.net/rilfmSUMTZW4ZLv331dz_spacer.gif" width="23"/>
<a href="https://send.streeteasy.com/wf/click?upn=qgkEN-2FsLhL09SNW3sJ3hgpI9L4G92VQUdhOe7svmkF-2Ffinx32sgA3-2BN-2FfmVRiwCEt4ZPPSntNueV5m6IQlZRR3TcWv1wLl-2FdZuop613DdKPIa9g9W1iI01EkFZSGdPd6PfMUap0r3gvwoWKs4i73OEfw87WNByxh4z1NfNNXWK4-3D_Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6tvjnltUJ-2Fa-2FVO3dUikZmi7UNSysebrgx-2F1o29D8hxnDy5DDqHquePju8vMmuH-2FquExtq36DWEFesr4PS3N07BnaS1-2FoSmm0L4x-2BCsquyoDu0seoZnTGRhBg7XzcGoIvozQDrLOJQmp2TrlSErddKpyVcfQOGdd5Nn4bKfrvF-2FpCUd-2BLNfI5wfUxDvIWrgZ36JLbr7Y31Q30PjXhBTkxoa9" style="color:#A1A1A1; font-family:Helvetica-Light,sans-serif; font-size:9px; font-weight:bold; letter-spacing:0.2px; text-decoration:none" target="_blank">PRIVACY POLICY</a>
</td>
</tr>
<tr>
<td height="50"></td>
</tr>
</tbody>
</table>
</center>
</center></td>
<td></td>
</tr>
<tr>
<td bgcolor="#F5F5F5" class="no_height" colspan="3" height="20"></td>
</tr>
</table>
<img src="https://send.streeteasy.com/wf/open?upn=Ma6wcZHu1PbO3ImqVrWTbjezUgjLFVLsPASzBr3sqaEQXSN2SMwyf0up9Ph3huskBhSWB42QkKONnCvTT5lwQ5hR-2FdCiD6YLfwZocGV5tYhoayPVIRrq4FHMN-2Bg9aBVHgmu-2BWCQ6PdUnIbKEFVlimMaGny-2FDFUazXtKcMAhMOJwY-2FtwCW01eDmC4kcZKfotKxTy64ScawwW5uEsK8aITlQPytnyQ391S-2B0rLqOLo-2FB2DAAy8pDwLtqzXpjLnORsMIQbYz1999vE29JMrzrGv1Qy9I4IFixvL6DnamTLEA6vFc6msNe6b6BTBcbruD0CPqzz1eU-2Fgx-2B41H7nQ-2Bl43yjBERlk2U5oaLZfudlb6qgPutRz6q1ceEnnYV1KIwRuylUIG3x3V9CiqYXby3R7YSteZ-2BTtEsHOb5PWX8BC-2F-2FmS2VDcx5HbG6C9yGllNJ0FNNyekEvIF-2Fh-2BaQOrBaD4qR39wXPMFc4-2BRu2PuNfWlO23x1wgBctx9tgvDKaoi98IW15T02PcIofj4CTClwFvm7A-3D-3D" alt="" width="1" height="1" border="0" style="height:1px !important;width:1px !important;border-width:0 !important;margin-top:0 !important;margin-bottom:0 !important;margin-right:0 !important;margin-left:0 !important;padding-top:0 !important;padding-bottom:0 !important;padding-right:0 !important;padding-left:0 !important;"/>
</body></html>
`};
//to:me from:noreply@streeteasy.com Search String for street easy
const pluscodekey ="AIzaSyBqeAMkHMiXKA-3QiBKqjryi3X9cof2FZM";
const emailregex = /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/i;
const phoneregex =/(\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4})/i;


async function insertEmail (data,emailcontent){
  const noteobj =
{
    "engagement": {
        "active": true,
        "ownerId": 1,
        "type": "EMAIL",
        "timestamp": Date.now(),
    },
    "associations": {
        "contactIds": [data],
        "companyIds": [ ],
        "dealIds": [ ],
        "ownerIds": [ ]
    },
   
"metadata": {
    "from": {
    // The details of the sender
      "email": "coulthrust@gmail.com",
      // String; the email address of the sender
      "firstName": "First",
      // String; The first name of the sender
      "lastName": "Last"
      // String; The last name of the sender
    },
    "to": [
    // The details of the recipient
      {
        "email": "contact name <test@test.com>"
        // String; the email address of the recipient 
      }
    ],
    "cc": [],
    // A list of details for anyone cc'd on the email.
    "bcc": [],
    // A list of details for anyone bcc'd on the email.
    "subject": "This is the subject of the email",
    // String; The subject of the email
    "html": "<div>This is the body of the email</div><div><br></div><div>-Me</div>",
    // String; The body of the HTML email
    "text": "This is the body of the email\n\n-Me"
    // String; The body of the text-only email.
}

}
return performPost(`https://api.hubapi.com/engagements/v1/engagements?hapikey=${hapikey}`, noteobj)
.then(data => {return (data) } )
.catch(error => {console.error(error); return{}})

}

function  getpluscode (listing) {
  // returns the promise of getting the vid for the given email
 // console.log ("url"+(`https://plus.codes/api/?address=${encodeURIComponent(listing)}&key=${pluscodekey}`));
     return  fetch (`https://plus.codes/api/?address=${encodeURIComponent(listing)}&key=${pluscodekey}`).then(response => response.json())
    .then(data => {return (data) } )
    .catch(error => {console.error(error)})
  }

function replacer (match,capture,offset,wholestring) 
{return String.fromCharCode(parseInt(capture,16)) };

   function rp2 (match,capture,offset,wholestring) 
{  // Do different operations for different tags

// this is for an alt tage in an image     
// if  (capture.replace(/^img[^>]+alt=3D\W([\w]+)\W>/g,'[$1]')) {return "["+capture+"]"}
if (capture.match (/alt=3D|alt=\W([\w]+)\W/)) { return "["+capture.match (/alt=3D|alt=\W([\w]+)\W/)[1]+"]";}  ///^img[^>]+alt=3D\W([\w]+)\W/
// preserve any anchor tags
if (capture.match (/^a[^>]+(https?:[^"]+)\W/)) { return "["+capture.match (/^a[^>]+(https?:[^"]+)\W/)[1]+"]";} 
if (capture.match (/^a[^>]+(mailto?:[^"]+)\W/)) { return "["+capture.match (/^a[^>]+(mailto?:[^"]+)\W/)[1]+"]";} 
// preserve any emails embedded in <> 
if (capture.match (/^([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/)) { return "["+capture+"]" } 
// return a lf for a td for zillow might process differently for other providers
if (capture.match (/^tr/)) { return "\n" } 
//End Blocks with a delimiter "###"
if (capture.match (/^table/)) { return "###" } 
//if (capture.match (/^br/)) { return "###" } 
// otherwise return "" 
return "";
};

var f = {};

f.body=inputData.body.replace(/=\s\n/g,"").replace(/<head[\W\w]*<\/head>/,"").replace(/<style[^<]*<\/style>/ig,"").replace(/\<([^>]+)>/g,rp2).replace(/\n?=C2=A0\n?/g," ").replace(/=([A-F0-9]{2})/g," ");
//      .replace(/^[\w\W\n]*<html/i).replace(/<style[^<]*<\/style>/ig,"")
 const n = (f.body.match(/streeteasy\slisting\sstreet\saddress\:([\w\W]+)[-]{3,}/i) || [])[1]||"-";
 const l = (n ? n.match(/\n(.+)/i)||[] : [])[1] || "-" ;
 const note = (n ? n.replace(/\n.+/i," "): n).trim(); // remove the 1st line
 const u = (f.body.match(/streeteasy\s+url\:[\s\n]*(.*)/i) || [])[1]||"-";

 console.log('apartment',l.match(/#[A-Za-z0-9]+/));
 //const d = f.body.match (/^date:\s+([,+\([A-Za-z\s[0-9:]*\))/im) || [];   
// Match Reply-To Email address
 const e = f.body.match (/^(.*)\[mailto:\s*([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/im) || []; 
// Match CC this will be the agent that was assigned the lead 
          //  const cc = f.body.match (/^cc:\s+([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/im) || []; 
// Match the from 
        //  const from =  f.body.match (/^from\:?[\s\"\w]*\[?([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/im) || []; 
          const phone = (f.body.match (/phone:\s*(\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4})/i) || [])[1]||"-";


console.log ('price:',f.body.match (/\$([0-9,]+)[\W\w]+FOR\sRENT/i));
// Process the email address     The reply-to email address is the most reliable
f.price
f.note =   note;
f.listing = l||"-"  ;
f.listingurl = u||"-";
f.email =  e[2] || "-";  
f.name  =  e[1] ? e[1].trim() : "-" ;  
f.from  =  inputData.from; 
f.cc    =  inputData.cc;  
f.date  =  inputData.date;  
f.phone =  phone ;
/// ************* LOOK FOR A PHONE NUMBER IN THE NOTE  
const altphone=(f.note.match(phoneregex)||[])[1];
f.phone = altphone && !f.phone ? altphone : f.phone;                                
                              
 
// *********** Turn this into a function
// find and name and split it into 1st and last name
if (!emailregex.test(f.name)) {
  //if the f.name is not an email
  // try to split the fname on spaces 
const namesplit = f.name.trim().split(/\s+/);
// Logger.log ("\nns:"+namesplit);
if (namesplit.length > 1 ) { f.firstname = namesplit[0]; 
                            f.lastname =namesplit.pop();}
  else { f.firstname =f.name , f.lastname = "-";}
}
// try to find the name in the email address
//  Logger.log ("\nf.name:"+f.name);
//  Logger.log ("\nf.lastname:"+f.lastname);
//   Logger.log ("\nf.firstname:"+f.firstname);
// *********** Turn this into a function
  if (emailregex.test (f.name)){
    // maybe there is a name in the Email Address
  const esplit = (f.name.split (/@/)[0].split('.'));
    if (esplit.length > 0) {f.name = esplit.join(" ");
                            f.firstname = esplit[0]; 
                            f.lastname =esplit.pop();
     };
  };

  const pluscode =  await getpluscode(f.listing);//.then(data =>(data));

  f.pluscode = pluscode ? pluscode.plus_code.global_code :"missing";
  

  const agent = (function (cc) {
    switch (cc){
    case 'chris@coulthrust.com' : return {sms :'+13473709408',hubspotid :'35013679'}  
    case 'david@stonecrestrealty.com' : return {sms :'+16173080839',hubspotid:'35029194'}
    case 'caroline@stonecrestrealty.com':return{sms:'+13473709408',hubspotid:'35029193'}
    case 'tzur@stonecrestrealty.com' : return {sms:'+13476851115',hubspotid:'35032776'}
    case 'f.z@stonecrestrealty.com' : return {sms:'+13473709408',hubspotid:'35028612'}
    default : return {sms:'+13473709408',hubspotid:'35013679'};
    }})(inputData.cc);

  f.smsnote = (f.name+':'+f.email+":"+f.phone+":"+f.listing+":"+f.note).trim().slice(0,160);    
  var output = {source: "streeteasy",phone : f.phone,name : f.name,email :f.email,note:f.note,listing:f.listing,listingurl:f.listingurl,firstname :f.firstname,lastname : f.lastname , sms :agent.sms , hubspotid:agent.hubspotid,smsnote: f.smsnote,
pluscode : f.pluscode};
  
  // get the pluscode

//https://firestore.googleapis.com/v1/projects/YOUR_PROJECT_ID/databases/(default)/documents/cities/LA



//var xx = fetch (`https://first-project-baa3e.firebaseio.com/txt.json?print=pretty`,options).then((response) => console.log("xxx:"+JSON.stringify(response)));
  
  //.log ("URI"+encodeURIComponent(f.listing));
  //console.log ("listing:"+f.listing);
 
 //console.log ("op:"+JSON.stringify(f.pluscode));
 // Use the plus_code.global_code 

 }

 zap(); 
// Get the plus code, match the plus code for the owning sales person, get any messaging or alerts for the apartment
// Send the text message or email message for the apartment
// Design a chain of messages of the apartment
// Analyze all of the responses from the sales person , responses for particular queries
// Send a message to John about this idea of analyzing responses




// get the best street address and the local_code 
// await for the 
//console.log ("ppp"+pluscodekey);
 // console.log("op"+op);
 /*
  console.log (f.listingurl);
  console.log (f.cc);
  console.log (f.phone);
  console.log (f.name);
  console.log (f.listing);
  console.log (f.firstname);
  console.log (f.lastname);
  console.log (f.email);
  console.log (f.note);
  console.log (f.date);
  console.log (agent.sms);
  console.log (agent.hubspotid);
  console.log(f.creditscore );
  console.log(f.income );
  console.log(f.jobtitle );
  console.log(f.employer);
  console.log(f.employedsince);
  console.log(f.pastjobs );
  console.log(f.reasonformoving );
  console.log(f.employer);
  console.log(f.pets );
  console.log(f.leaselength );
  console.log(f.parking );
  console.log(f.employer );
  console.log(f.desiredneighborhood );
  console.log(f.smoker );
*/
//  console.log (f.body);


/*
Function to get the plusCode
function plusCode(address) {
  
  if (!address) {return ('no address')}
 
 var url = 'https://plus.codes/api/?'
   + 'address='+encodeURIComponent(address) 
   + '&key=AIzaSyBqeAMkHMiXKA-3QiBKqjryi3X9cof2FZM';
  
var response =UrlFetchApp.fetch(url);
 // use the global code because that value is unique at least
console.log(JSON.parse(response).plus_code.global_code); 
 return response ?  JSON.parse(response).plus_code.global_code : "Missing"
}
*/
